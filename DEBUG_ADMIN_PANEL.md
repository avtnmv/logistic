# Диагностика проблемы с админ панелью

## Проблема
Пользователи не отображаются в админ панели.

## Добавленные инструменты диагностики

### 1. Расширенные логи в консоли
- Подробные логи при загрузке пользователей
- Информация о токенах аутентификации
- Детали API ответов

### 2. Кнопка "Тест API"
- Тестирует соединение с API
- Проверяет токены аутентификации
- Тестирует админские endpoints

## Возможные причины проблемы

### 1. Проблемы с аутентификацией
- **Пользователь не аутентифицирован**: `user` = null
- **Пользователь не админ**: `user.is_admin` = false
- **Токен отсутствует**: нет `accessToken` в localStorage
- **Токен истек**: токен просрочен

### 2. Проблемы с API
- **API недоступен**: сервер не отвечает
- **Неправильный URL**: неправильный `REACT_APP_API_BASE_URL`
- **Проблемы с CORS**: блокировка запросов браузером
- **Ошибки авторизации**: 401, 403 ошибки

### 3. Проблемы с данными
- **Пустой ответ**: API возвращает пустой список пользователей
- **Неправильная структура**: неожиданная структура ответа
- **Ошибки парсинга**: проблемы с обработкой данных

## Как диагностировать

### 1. Откройте консоль браузера (F12)
### 2. Перейдите в админ панель
### 3. Посмотрите на логи:
```
=== AdminPanel useEffect triggered ===
=== loadTabData called ===
=== LOAD USERS DEBUG ===
```

### 4. Нажмите кнопку "Тест API"
### 5. Проверьте результаты тестов в консоли

## Типичные ошибки и решения

### "Доступ запрещен. Требуются права администратора."
- **Причина**: Пользователь не админ
- **Решение**: Убедитесь, что `user.is_admin = true`

### "Network error. Please check your connection."
- **Причина**: API недоступен
- **Решение**: Проверьте URL API и доступность сервера

### "401 Unauthorized"
- **Причина**: Недействительный токен
- **Решение**: Перелогиньтесь или обновите токен

### "403 Forbidden"
- **Причина**: Недостаточно прав
- **Решение**: Убедитесь, что пользователь админ

## Файлы для проверки
- `src/components/AdminPanel.tsx` - основная логика
- `src/services/adminService.ts` - API вызовы
- `src/services/apiClient.ts` - HTTP клиент
- `src/contexts/AuthContext.tsx` - аутентификация
- `src/utils/apiTest.ts` - инструменты тестирования

## Следующие шаги
1. Проверьте консоль браузера
2. Используйте кнопку "Тест API"
3. Проверьте статус аутентификации
4. Убедитесь в доступности API сервера
